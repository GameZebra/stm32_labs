here I'm using manual comparison for the reset (update) event. the code can be updated with interupts.
